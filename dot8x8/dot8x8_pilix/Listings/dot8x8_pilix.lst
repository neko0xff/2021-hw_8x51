C51 COMPILER V9.60.0.0   DOT8X8_PILIX                                                      12/24/2021 16:56:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DOT8X8_PILIX
OBJECT MODULE PLACED IN .\Objects\dot8x8_pilix.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE dot8x8_pilix.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\dot8x8_pilix.lst) TABS(2) OBJECT(.\Objects\dot8x8_pilix.obj)

line level    source

   1          /*
   2          * File: dot8x8_pilix.c
   3          * 功能: 令點矩陣某一行做霹靂燈的動作
   4          */
   5          
   6          #include "io51.h"
   7          /*霹靂燈顯示碼*/
   8          char code dot8x8_pilix[64]={
   9              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF7, //1
  10              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF7,0xFF, //2
  11              0xFF,0xFF,0xFF,0xFF,0xFF,0xF7,0xFF,0xFF, //3
  12              0xFF,0xFF,0xFF,0xFF,0xF7,0xFF,0xFF,0xFF, //4
  13              0xFF,0xFF,0xFF,0xF7,0xFF,0xFF,0xFF,0xFF, //5
  14              0xFF,0xFF,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF, //6
  15              0xFF,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, //7
  16              0xF7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, //8
  17          };
  18          char code dot8x8_pilix2[56]={
  19              0xFF,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, //9
  20              0xFF,0xFF,0xF7,0xFF,0xFF,0xFF,0xFF,0xFF, //10
  21              0xFF,0xFF,0xFF,0xF7,0xFF,0xFF,0xFF,0xFF, //11
  22              0xFF,0xFF,0xFF,0xFF,0xF7,0xFF,0xFF,0xFF, //12
  23              0xFF,0xFF,0xFF,0xFF,0xFF,0xF7,0xFF,0xFF, //13
  24              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF7,0xFF, //14
  25              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF7  //15
  26          };
  27          char buf[8]; //緩衝器
  28          void delay(int x);
  29          void shift_left();
  30          void shift_right();
  31          
  32          /*主程式*/
  33          void main(){
  34   1         int i,j,k;
  35   1      
  36   1         /*清除存放左移資料的buf[8]*/
  37   1         for(i=0;i<8;i++) buf[i]=0xFF; 
  38   1      
  39   1         while(1){
  40   2             for(i=0;i<8*8;i++){
  41   3                 /*把左移資料分別存在buf[]中*/
  42   3                 for(j=0;j<7;j++)
  43   3                     buf[j]= buf[j+1];
  44   3                     buf[j]= dot8x8_pilix[i];
  45   3                 
  46   3                 /*重復掃描各字型50回(增加亮度)*/
  47   3                 for(k=0;k<50;k++){
  48   4                     shift_left(); //字型左移
  49   4                 }
  50   3             }
  51   2             for(i=0;i<8*8;i++){
  52   3                 /*把左移資料分別存在buf[]中*/
  53   3                 for(j=0;j<7;j--)
  54   3                     buf[j]= buf[j-1];
C51 COMPILER V9.60.0.0   DOT8X8_PILIX                                                      12/24/2021 16:56:07 PAGE 2   

  55   3                     buf[j]= dot8x8_pilix2[i];
  56   3                 
  57   3                 /*重復掃描各字型50回(增加亮度)*/
  58   3                 for(k=0;k<50;k++){
  59   4                     shift_right(); //字型左移
  60   4                 }
  61   3             }
  62   2         }
  63   1      }
  64          
  65          /*call 左移的副程式*/
  66          void shift_left(){
  67   1          int i;
  68   1          int enable_signal=0x01;//致能=0x01
  69   1      
  70   1          /*各字型由8筆資料組成=掃8回*/
  71   1          for(i=0;i<8;i++){
  72   2          /*把左移資料分別存在buf[]中*/
  73   2              P1=buf[i];
  74   2              P2=enable_signal;
  75   2              delay(50); //delay 50ms=0.05sec
  76   2              enable_signal<<=1; //左移1個位元
  77   2          }
  78   1      }
  79          
  80          /*call 右移的副程式*/
  81          void shift_right(){
  82   1          int i;
  83   1          int enable_signal=0x01;//致能=0x01
  84   1      
  85   1          /*各字型由8筆資料組成=掃8回*/
  86   1          for(i=0;i<8;i++){
  87   2          /*把右移資料分別存在buf[]中*/
  88   2              P1=buf[i];
  89   2              P2=enable_signal;
  90   2              delay(50); //delay 50ms=0.05sec
  91   2              enable_signal>>=1; //右移1個位元
  92   2          }
  93   1      }
  94          
  95          /*delay time*/
  96          void delay(int x){
  97   1          int m;
  98   1          for(m=0;m<x;m++);
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    396    ----
   CONSTANT SIZE    =    120    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
